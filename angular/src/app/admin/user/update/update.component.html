<!-- Content Header (Page header) -->

<div class="host">
  <div >
    <app-title title="Utilisateur"></app-title>
    <!-- right column -->
    <form (ngSubmit)="submit(myForm)" [formGroup]="myForm">
      <div class="row">
        <div class="col-md-6">
          <mat-card>
            <div style="margin-bottom: 20px;">
              <h5>Informations personelles</h5>
            </div>

            <mat-form-field appearance="outline">
              <mat-label>Nom</mat-label>
              <input matInput formControlName="nom" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Prénom</mat-label>
              <input matInput formControlName="prenom" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Adresse email</mat-label>
              <input matInput formControlName="email" required>
            </mat-form-field>


            <mat-form-field appearance="outline">
              <mat-label>Profil</mat-label>
              <mat-select formControlName="idProfil" (selectionChange)="selectChangeProfil($event)">
                <mat-option *ngFor="let profil of profils | async" [value]="profil.id">{{ profil.label }}</mat-option>
              </mat-select>
            </mat-form-field>

            <!-- <mat-form-field appearance="outline">
              <mat-label>Type</mat-label>
              <mat-select formControlName="idType">
                <mat-option *ngFor="let e of types" [value]="e.id">{{ e.name }}</mat-option>
              </mat-select>
            </mat-form-field> -->



            <mat-form-field appearance="outline" *ngIf="myForm.get('idProfil').value === 3">
              <mat-label>Region</mat-label>
              <mat-select formControlName="idRegion" (selectionChange)="selectChange($event)">
                <mat-option *ngFor="let e of regions | async" [value]="e.id">{{ e.libelle }}</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" *ngIf="myForm.get('idProfil').value === 3">
              <mat-label>Direction</mat-label>
              <mat-select formControlName="idOrganisme">
                <mat-option *ngFor="let org of organismes" [value]="org.id">{{ org.label }}</mat-option>
              </mat-select>
            </mat-form-field>


            <mat-form-field appearance="outline" *ngIf="myForm.get('idProfil').value === 4">
              <mat-label>Métiers</mat-label>
              <mat-select formControlName="idMetier" >
                <mat-option *ngFor="let e of metiers " [value]="e.id">{{ e.name }}</mat-option>
              </mat-select>
            </mat-form-field>



            <!-- <mat-form-field appearance="outline">
              <mat-label>Adresse de résidence</mat-label>
              <input matInput formControlName="adresse" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Téléphone(Mobile)</mat-label>
              <input matInput formControlName="tel" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Téléphone(Fix)</mat-label>
              <input matInput formControlName="fix" required>
            </mat-form-field> -->




          </mat-card>
        </div>

        <div class="col-md-6">
          <mat-card>
            <div style="margin-bottom: 20px;">
              <h5>Informations d'authentification</h5>
            </div>

            <mat-form-field appearance="outline">
              <mat-label>Nom d'utilisateur</mat-label>
              <input matInput formControlName="username" required>
            </mat-form-field>
            <!-- /.box-header -->
            <!-- form start -->
            <mat-form-field appearance="outline">
              <mat-label>Mot de passe</mat-label>
              <input matInput formControlName="password" [type]="hide ? 'password' : 'text'" required>
              <button type="button" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Répéter Mot de passe</mat-label>
              <input matInput formControlName="password2" [type]="hide2 ? 'password' : 'text'" required>
              <button type="button" mat-icon-button matSuffix (click)="hide2 = !hide2"
                [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                <mat-icon>{{hide2 ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
            </mat-form-field>

            <mat-checkbox formControlName="actif"> Actif</mat-checkbox>
          </mat-card>
          <div class="actions">
            <button style="margin-top: 20px;"
            [disabled]="myForm.invalid || this.myForm.get('password').value !== this.myForm.get('password2').value" mat-raised-button
            color="primary" type="submit">
            Enregister
          </button>

          <button style="margin-top: 20px; margin-right: 20px;" [routerLink]="['/admin/user']" mat-raised-button type="button">
          Retout
        </button>
        </div>


        </div>


        <pre>
          <!-- {{myForm.value | json}} -->
        </pre>
      </div>
    </form>
  </div>
</div>
